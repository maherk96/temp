```java
@Override
public void beforeEach(ExtensionContext context) {
    var methodName = context.getRequiredTestMethod().getName();
    var rawDisplayName = context.getDisplayName();
    
    // Enhanced display name resolution similar to ReportPortal
    var displayName = resolveDisplayName(context, methodName, rawDisplayName);
    
    var createTest = new QAPTest(methodName, displayName);
    createTest.setStartTime(Instant.now().toEpochMilli());
    createTest.setTag(context.getTags());
    
    LogEventsManager.clearLoggingEvents();
    StoreManager.putMethodStoreData(context, METHOD_DESCRIPTION_KEY, createTest);
}

private String resolveDisplayName(ExtensionContext context, String methodName, String rawDisplayName) {
    Optional<Method> method = context.getTestMethod();
    if (method.isEmpty()) {
        return isAutoGeneratedDisplayName(rawDisplayName, methodName) ? methodName : rawDisplayName;
    }
    
    Method testMethod = method.get();
    
    // 1. Check for explicit JUnit @DisplayName on method
    DisplayName junitDisplayName = testMethod.getAnnotation(DisplayName.class);
    if (junitDisplayName != null) {
        return junitDisplayName.value();
    }
    
    // 2. Check for explicit JUnit @DisplayName on class
    DisplayName classDisplayName = testMethod.getDeclaringClass().getAnnotation(DisplayName.class);
    if (classDisplayName != null) {
        return classDisplayName.value();
    }
    
    // 3. For auto-generated names (especially parameterized tests), use method name
    if (isAutoGeneratedDisplayName(rawDisplayName, methodName)) {
        return methodName;
    }
    
    // 4. Use the raw display name if it appears to be custom
    return rawDisplayName;
}

private boolean isAutoGeneratedDisplayName(String displayName, String methodName) {
    return displayName.equals(methodName + "()") || 
           displayName.startsWith(methodName + "(") ||
           displayName.equals(methodName);
}

public long getOrCreateTestDetails(QAPTest testDescription, long testClassId, String clazzName) {
    var methodName = testDescription.getMethodName();
    var displayName = testDescription.getDisplayName();
    
    // If display name equals method name, it's either:
    // 1. No explicit @DisplayName was provided, or
    // 2. Someone explicitly set @DisplayName to match method name
    // In both cases, just check by method name
    if (methodName.equals(displayName)) {
        return EntityHelper.getOrCreate(
            () -> methodExistsForTestClass(methodName, testClassId),
            () -> getTestCaseByMethodName(methodName, testClassId).getId(),
            () -> TestDTO.createTestDetails(methodName, methodName, testClassId),
            this::createForJUnit,
            String.format("Existing test case found for method %s in %s", methodName, clazzName),
            String.format("Adding test case %s to test class %s", methodName, clazzName)
        );
    }
    
    // Only check display name when it's explicitly different from method name
    return EntityHelper.getOrCreate(
        () -> checkIfTestCaseExistsInTestClass(methodName, displayName, testClassId),
        () -> getTestCaseForTestClass(methodName, displayName, testClassId).getId(),
        () -> TestDTO.createTestDetails(displayName, methodName, testClassId),
        this::createForJUnit,
        String.format("Existing test case found for %s %s %s", methodName, displayName, clazzName),
        String.format("Adding test case %s to test class %s %s", methodName, displayName, clazzName)
    );
}

```
